<!DOCTYPE html>
<html>
<head>

    <style>
        #console-output {
                width: 90%;
                height: 650px;
                border: 1px solid #ccc;
                margin: 10px auto;
                padding: 10px;
                overflow-y: auto;
                font-family: monospace;
                background-color: #f4f4f4;
                white-space: pre-wrap;}
    
    #demoGrid{
        display:grid;
        grid-template-columns:repeat(5, max-content);
        gap:12px;
        }

        /* Model builder styles */
        .target-area {
            padding: 8px;
            min-height: 300px;
            width: 180px;
            background-color: #f0f0f0;
            margin: 0;
            position: absolute;
            left: 0;
            top: 40px;
        }
    
        .block {
            background-color: lightblue;
            padding: 6px;
            margin-bottom: 6px;
            border-radius: 4px;
            width: 165px;
            font-size: 12px;
        }
        
        .block h4 {
            font-size: 14px;
            margin-top: 0;
            margin-bottom: 6px;
        }
        
        .block input {
            width: 140px;
            height: 24px;
            margin-bottom: 3px;
            box-sizing: border-box;
            font-size: 12px;
        }
        
        .block select {
            width: 140px;
            height: 24px;
            margin-bottom: 3px;
            font-size: 12px;
        }

        /* Performance monitoring */
        #perfVizArea {
            position: fixed;
            right: 20px;
            top: 10px;
            width: 500px;
            height: 200px;
            text-align: center;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        #lossGraph {
            max-height: 190px;
        }

        /* Visualization styles */
        .layerBlock { 
            width: 100%;  /* Take full width instead of fixed 950px */
            margin: 4px 0;  /* More vertical spacing between blocks */
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 8px;  /* Rounded corners for better visual separation */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);  /* Subtle shadow for depth */
        }
        
        .sectionLabel {
            font: bold 14px monospace;  /* Slightly larger font */
            margin: 2px 0;
            padding: 4px;
            background-color: #f0f0f0;  /* Background to separate sections */
            border-radius: 4px;
        }
        
        .canvasGrid {
            display: flex;  /* Changed from grid to flex */
            flex-wrap: wrap;
            gap: 0;
            margin-bottom: 4px;
            padding: 0;
            background-color: #fafafa;
            border-radius: 4px;
        }
        
        .canvasGrid canvas {
            image-rendering: pixelated;
            border: none;
            margin: 0;  /* Ensure no margins */
            padding: 0;  /* Ensure no padding */
            display: block;  /* Prevent inline display spacing */
        }


        .demoCell {
            text-align: center;
            font: 14px/1 monospace;
        }
        canvas {
            border: 1px solid #444;
        }
        
        .container {
            display: flex;
            gap: 20px;
        }
    
        .visualization-container {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f8f8;
        }
    
        /* Network visualization container */
        #netViz {
            position: absolute;
            left: 190px;
            right: 20px;
            top: 60px;
            width: calc(100% - 220px) !important;
            max-width: none !important;
        }
        
        /* Start training button */
        #startTrainingButton {
            position: absolute;
            left: 10px;
            top: 10px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        #startTrainingButton:hover {
            background-color: #45a049;
        }
        </style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <div id="loading-indicator" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">Loading MNIST dataset...</div>

  <!-- Import TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"></script>
  <!-- Import tfjs-vis -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js"></script>

        
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        
<body>
    <button id="startTrainingButton" class="action-button">Start Training</button>
    
    <div id="perfVizArea">
        <canvas id="lossGraph"></canvas>
    </div>
    
    <div class="target-area" id="target">
        <!-- Default model, was meant to be draggable. but changed to not for now.. -->
        
        <!-- First Conv2D Layer -->
        <div class="block" id="conv2d-clone" draggable="true" data-type="conv2d">
            <h4>Conv2D Layer</h4>
            Kernel Size: <input type="text" placeholder="kernelSize" value="5"><br>
            Filters: <input type="text" placeholder="filters" value="8"><br>
            Strides: <input type="text" placeholder="strides" value="1">
        </div>
        
        <!-- ReLU Activation -->
        <div class="block" id="relu-clone" draggable="true" data-type="relu">
            <h4>ReLU Activation</h4>
        </div>
        
        <!-- First MaxPooling Layer -->
        <div class="block" id="maxpool-clone" draggable="true" data-type="maxpool">
            <h4>MaxPooling Layer</h4>
            Pool Size: <input type="text" placeholder="poolSize" value="2"><br>
            Strides: <input type="text" placeholder="strides" value="2">
        </div>
        
        <!-- Second Conv2D Layer -->
        <div class="block" id="conv2d-clone2" draggable="true" data-type="conv2d">
            <h4>Conv2D Layer</h4>
            Kernel Size: <input type="text" placeholder="kernelSize" value="5"><br>
            Filters: <input type="text" placeholder="filters" value="16"><br>
            Strides: <input type="text" placeholder="strides" value="1">
        </div>
        
        <!-- Second ReLU Activation -->
        <div class="block" id="relu-clone2" draggable="true" data-type="relu">
            <h4>ReLU Activation</h4>
        </div>
        
        <!-- Second MaxPooling Layer -->
        <div class="block" id="maxpool-clone2" draggable="true" data-type="maxpool">
            <h4>MaxPooling Layer</h4>
            Pool Size: <input type="text" placeholder="poolSize" value="2"><br>
            Strides: <input type="text" placeholder="strides" value="2">
        </div>
        
        <div class="block" id="flatten-clone" draggable="true" data-type="flatten">
            <h4>Flatten Layer</h4>
        </div>

        <!-- Dense Layer -->
        <div class="block" id="dense-clone" draggable="true" data-type="dense">
            <h4>Dense (Linear) Layer</h4>
            Input Channels: <input type="text" placeholder="inputChannels"><br>
            Output Channels: <input type="text" placeholder="outputChannels" value="10">
        </div>
        
        <!-- Loss block -->
        <div class="block" id="loss" draggable="true" data-type="loss">
            <h4>Loss</h4>
            Optimizer&nbsp;
            <select data-param="optimizer">
                <option value="adam" selected>Adam</option>
                <option value="sgd">SGD</option>
            </select><br>
            Loss&nbsp;
            <select data-param="loss">
                <option value="softmaxCrossEntropy">softmaxCrossEntropy</option>
            </select>
        </div>
    </div>
    
    <div class="container" id="netViz">
        <div class="container" id="layersViz" data-is-loaded="false" style="display: block; width: 100%;">
            <div>2nd Convolution layer weights are averaged during visualization for performance reasons.</div>
        </div>
        <div class="container" id="imgPerformance" style="margin-top: 20px;">
            <div class="container" id="bestPerformers">
                <!--best performers-->
            </div>
            <div class="container" id="worstPerformers">
                <!--worst performers-->
            </div>
        </div>
        <div id="demoGrid"></div>
    </div>

    <script src="./userTrainingExperience.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
