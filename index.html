<!DOCTYPE html>
<html>
<head>

    <style>
        #console-output {
                width: 90%;
                height: 650px;
                border: 1px solid #ccc;
                margin: 10px auto;
                padding: 10px;
                overflow-y: auto;
                font-family: monospace;
                background-color: #f4f4f4;
                white-space: pre-wrap;}
    
    #demoGrid{
        display:grid;
        grid-template-columns:repeat(5, max-content);
        gap:12px;
        }


        .layerBlock { width:950px;margin:8px 0;padding:6px;border:1px solid #ccc;}
    .sectionLabel{font:bold 12px monospace;margin:4px 0;}
    .canvasGrid  {display:grid;grid-template-columns:repeat(auto-fill,minmax(40px,1fr));gap:4px;}
    .canvasGrid canvas{image-rendering:pixelated;}


    .demoCell {
      text-align: center;
      font: 14px/1 monospace;
    }
    canvas {
      border: 1px solid #444;
    }
        
        
                .container {
        display: flex;
        gap: 20px;
        }
    
        .source-area, .target-area {
        border: 2px solid black;
        padding: 20px;
        min-height: 300px;
        width: 200px;
        }
    
        /* .box {
        background-color: lightblue;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 5px;
        cursor: grab;
        } */
    
        .block {
        background-color: lightblue;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 5px;
        cursor: grab;
        position: relative;
        }
    
        .trash-icon {
        position: absolute;
        top: 0px;
        right: 0px;
        cursor: pointer;
        font-size: 16px;
        z-index: 10;
        }
    
        .target-area {
        background-color: #f0f0f0;
        }
    
        /* .trash-icon {
            
        } */
    
        .visualization-container {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f8f8;
        }
        
        .performer {
            display: inline-block;
            margin: 5px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: center;
            background-color: white;
        }
        
        .source-image {
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid #007bff;
            border-radius: 3px;
            display: inline-block;
        }
        
        .similar-images-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .similar-image {
            padding: 3px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
    


        </style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <div id="loading-indicator" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">Loading MNIST dataset...</div>

  <!-- Import TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"></script>
  <!-- Import tfjs-vis -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js"></script>

        
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">



    
            
        
<body>
    <button onclick="window.location.href='pretrainedNets.html'">
        See Pretrained Nets
    </button>
    <div id="demoGrid"></div>
    <canvas id="canvas" width="300" height="300"></canvas>
    <div draggable="true" class="layer-component" data-layer-type="dense">Dense Layer</div>
    <div id="box">GIMME DAT BACON</div>
    <input type="file" id="fileInput">
    <div id="perfVizArea" class="container">
        <canvas id="lossGraph"></canvas>
        <canvas id="accGraph"></canvas>
    </div>
    <div id="tinyOutputWindow" style="width: 100%; height: 100px; border: 1px solid #ddd; border-radius: 3px; padding: 5px; overflow-y: auto; background-color: #f9f9f9; position: relative; left: 0;">
        <p id="outputText">Output will appear here...</p>
    </div>
    
    <!-- <div class="block" draggable="true" id="blocky1">mOVE 120 STEPS
        <h1>HI!!!</h1>
        <input type="text" value="10">
        
    </div> -->
    <div class="container" style="display: flex; gap: 20px;"> <!--irrelevant extras form pedagogy-->
        <div class="source-area">

            <!-- Dense (Linear) Layer -->
            <div class="block" draggable="true" id="dense">
                <h4>Dense (Linear) Layer</h4>
                Input Channels: <input type="text" placeholder="inputChannels"><br>
                Output Channels: <input type="text" placeholder="outputChannels">
            </div>
        
            <!-- Conv2D Layer -->
            <div class="block" draggable="true" id="conv2d">
                <h4>Conv2D Layer</h4>
                Kernel Size: <input type="text" placeholder="kernelSize"><br>
                Filters: <input type="text" placeholder="filters"><br>
                Strides: <input type="text" placeholder="strides">
            </div>
        
            <!-- MaxPooling2D Layer -->
            <div class="block" draggable="true" id="maxpool">
                <h4>MaxPooling Layer</h4>
                Pool Size: <input type="text" placeholder="poolSize"><br>
                Strides: <input type="text" placeholder="strides">
            </div>
        
            <!-- ReLU Activation -->
            <div class="block" draggable="true" id="relu">
                <h4>ReLU Activation</h4>
            </div>
        
            <!-- Sigmoid Activation -->
            <div class="block" draggable="true" id="sigmoid">
                <h4>Sigmoid Activation</h4>
            </div>
        
            <!-- Tanh Activation -->
            <div class="block" draggable="true" id="tanh">
                <h4>Tanh Activation</h4>
            </div>
        </div>
        
        <div class="target-area" id="target">
            <!-- Default model -->
            
            <!-- First Conv2D Layer -->
            <div class="block" id="conv2d-clone" draggable="true" data-type="conv2d">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>Conv2D Layer</h4>
                Kernel Size: <input type="text" placeholder="kernelSize" value="5"><br>
                Filters: <input type="text" placeholder="filters" value="8"><br>
                Strides: <input type="text" placeholder="strides" value="1">
            </div>
            
            <!-- ReLU Activation -->
            <div class="block" id="relu-clone" draggable="true" data-type="relu">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>ReLU Activation</h4>
            </div>
            
            <!-- First MaxPooling Layer -->
            <div class="block" id="maxpool-clone" draggable="true" data-type="maxpool">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>MaxPooling Layer</h4>
                Pool Size: <input type="text" placeholder="poolSize" value="2"><br>
                Strides: <input type="text" placeholder="strides" value="2">
            </div>
            
            <!-- Second Conv2D Layer -->
            <div class="block" id="conv2d-clone2" draggable="true" data-type="conv2d">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>Conv2D Layer</h4>
                Kernel Size: <input type="text" placeholder="kernelSize" value="5"><br>
                Filters: <input type="text" placeholder="filters" value="16"><br>
                Strides: <input type="text" placeholder="strides" value="1">
            </div>
            
            <!-- Second ReLU Activation -->
            <div class="block" id="relu-clone2" draggable="true" data-type="relu">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>ReLU Activation</h4>
            </div>
            
            <!-- Second MaxPooling Layer -->
            <div class="block" id="maxpool-clone2" draggable="true" data-type="maxpool">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>MaxPooling Layer</h4>
                Pool Size: <input type="text" placeholder="poolSize" value="2"><br>
                Strides: <input type="text" placeholder="strides" value="2">
            </div>
            
            <div class="block" id="flatten-clone" draggable="true" data-type="flatten">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>Flatten Layer</h4>
            </div>

            <!-- Dense Layer -->
            <div class="block" id="dense-clone" draggable="true" data-type="dense">
                <div class="trash-icon">üóëÔ∏è</div>
                <h4>Dense (Linear) Layer</h4>
                Input Channels: <input type="text" placeholder="inputChannels"><br>
                Output Channels: <input type="text" placeholder="outputChannels" value="10">
            </div>
            
            

            <!-- Loss block -->
            <div class="block" id="loss" draggable="true" data-type="loss">
                <h4>Loss</h4>
                Optimizer&nbsp;
                <select data-param="optimizer">
                    <option value="adam" selected>Adam</option>
                    <option value="sgd">SGD</option>
                </select><br>
                Loss&nbsp;
                <select data-param="loss">
                    <option value="softmaxCrossEntropy">softmaxCrossEntropy</option>
                </select>
            </div>
        </div>
    </div>
    <button id="startTrainingButton" class="action-button">Start Training</button>
    <div class="container" id="netViz" >
        <div class = "container" id="layersViz" data-is-loaded="false">
            
        </div>
        <div class="container" id="imgPerformance">
            <div class="container" id = "bestPerformers">
                <!--best performers-->
            </div>
            <div class="container" id = "worstPerformers">
                <!--worst performers-->
            </div>
        </div>
    </div>

    <!-- Loss and Accuracy Graph Container -->
    <div class="visualization-container">
        <h3>Training Performance</h3>
        <div id="lossAccuracyGraph" style="width: 600px; height: 300px;"></div>
    </div>

    <!-- <div style="width: 50px; height: 50px; background-color: red;">
        <div style="position:relative; width:20px;height:20px; top:10px;left:10px; background-color: blue;">
        

        </div>

    </div> -->

    <script src="./userTrainingExperience.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
