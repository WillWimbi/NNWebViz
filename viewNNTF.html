//Show a list of model activations as little grids of the weights. 
//Chain of them, like in convnetjs
//show weights of each layer. 

//Dive into convnetjs and see the specific mnist images.
//show the images in a... UI element that will be a dropdown. It will be... possible one of those
//'flex' column containers or something.
//Then we'll use a chart.js to show the loss...

//Have a 'worst performance' section showcasing the softmax output for that area. 
//Find cosine similarity or something between images - some embedded vector for ALL images
//in the training set, and compute the ones with smallest 'vector' differences in this high dimensional
//similarity space during each training loop for the user - list the top 10 'most similar' images.
//Let's learn about how cosine similarity is used in AI.
//Showcase the overall dataset structure and what percentage of it has been iterated through so far
//in these epoch, average images fed in per second... etc.
//A 'view 100nns' page that takes us to a web comparer of all these networks and their disagreements
//despite having the same architecture, weights, and hyperparams.
//THEN another area that takes us to a 'hyperparam' adjustment area so we can viz
//the effects of different hyperparams on net, alongside changing some layer sizes, 
//alongside changing initializations.
//Essentially graphing loss, accuracy, and other metrics for each of these changes.
//WITHIN this hyperparam difference visualization area we'd do primarly
// loss function visualization (possibly) with a little 'derivative' for the change in this
//specific hyperparam across the training loop. That is, imagine we increase the amount of channels
//in some conv layers, so we see the change in the loss function with respect to the amount of channels.
//we might see it have a higher loss in the beginning with the derivative being 'negative' at the beginning,
//but perhaps given enough time the network reaches at least a similar if not improved loss
//so by the end the loss is lower and the derivative of the 'scalar' change of that initial 
//hyperparam is larger - e.g if its typically 16 and in this casae was set to 26 channels,
//the scalar is 26/16 and we observe the gradient in the loss function wrt percentage change in the
//hyperparam. This would be scaled to a certain value to make it sensible on the y axis 
//(x axis is iters/epochs and y is derivative wrt to loss at that point in training compared to baseline),
//if increasing this hyperparam made loss go lower and if decreasing it made it go higher etc.
//this would be a summed value of each test case of this varying hyperparam, an avg derivative so to speak.
//Furthermore we could visualize each of those tested cases individually, say, seeing 
//the loss with 10 or more individual cases of the hyperparam change, intelligently colored
//to have distinct but darker gradients for smaller values and brighter ones for larger vals,
//or maybe red for smaller and blue for larger, for EACH hyperparam change (that can even be amount
//of training image samples, learning rate, layer sizes, amount of layers even, relu vs sigmoid vs tanh)
//and some others.... 

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">


<html><head>
    <style>
    #console-output {
            width: 90%;
            height: 650px;
            border: 1px solid #ccc;
            margin: 10px auto;
            padding: 10px;
            overflow-y: auto;
            font-family: monospace;
            background-color: #f4f4f4;
            white-space: pre-wrap;}

    .container {
    display: flex;
    gap: 20px;
    }

    .source-area, .target-area {
    border: 2px solid black;
    padding: 20px;
    min-height: 300px;
    width: 200px;
    }

    /* .box {
    background-color: lightblue;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    cursor: grab;
    } */

    .block {
    background-color: lightblue;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    cursor: grab;
    position: relative;
    }

    .trash-icon {
    position: absolute;
    top: 0px;
    right: 0px;
    cursor: pointer;
    font-size: 16px;
    z-index: 10;
    }

    .target-area {
    background-color: #f0f0f0;
    }

    .trash-icon {
        border:2px solid blue;
    }

    </style>
            
        </head>
<body>
    <canvas id="canvas" width="300" height="300"></canvas>
    <div draggable="true" class="layer-component" data-layer-type="dense">Dense Layer</div>
    <div id="box">GIMME DAT BACON</div>
    <input type="file" id="fileInput">
    <!-- <div id="console-output"></div> -->
    
    <!-- <div class="block" draggable="true" id="blocky1">mOVE 120 STEPS
        <h1>HI!!!</h1>
        <input type="text" value="10">
        
    </div> -->
    <div class="container" style="display: flex; gap: 20px;"> <!--irrelevant extras form pedagogy-->
        <div class="source-area">
            <div class="block" draggable="true" id="block1">
                <h4>ReLU Layer</h4>
                

                
            </div>
            <div class="block" draggable="true" id="block2">
                <!-- We'll put in an ability to have a little trash can icon here to remove layers!! <div class="flex"><> -->
                Input Channels:
                <input type="text" placeholder="inputChannels" >
                Output Channels:
                <input type="text" placeholder="outputChannels" >

            </div>
            <!-- //Conv2D layer
            //Sigmoid function
            //Tanh activation function
            //Maxpool function
            

            //Loss functions:
            //Cross Entropy Loss
            //Mean Squared Error Loss
            //Absolute Error Loss -->
            <div class="block" draggable="true" id="block3">Box 3</div>
        </div>
        <div class="target-area" id="target">
            Drop boxes here
        </div>
    </div>
    <!-- <div style="width: 50px; height: 50px; background-color: red;">
        <div style="position:relative; width:20px;height:20px; top:10px;left:10px; background-color: blue;">
        

        </div>

    </div> -->

</body>
</html>
<script>
    const blocks = document.querySelectorAll('.block');
    

    // let r = document.getElementById("source-area");
    // r.addEventListener("dragStart",function(event){
    //     event.preventDefault();
    // });

      // 1. Make blocks draggable
    blocks.forEach(function(box) {
        box.addEventListener('dragstart', function(event) {
        // Store which box is being dragged
        event.dataTransfer.setData('text/plain', box.id);
        });
    });

    //2. set def. behavior
    document.getElementById("target").addEventListener("dragover", function(event) {
        event.preventDefault();
    });


    document.getElementById("target").addEventListener('drop', function(event){
        let boxId = event.dataTransfer.getData('text/plain');
        let origBox = document.getElementById(boxId);
        const newBox = origBox.cloneNode(true);
        newBox.id = boxId + '-clone';
        document.getElementById("target").appendChild(newBox);
        // Add trash icon to the newly dropped block
        addTrashIconToBlock(newBox);
    });

    
    function addTrashIconToBlock(block) {
        // Create a new div element that will be our trash icon
        const trashIcon = document.createElement('div');
        // This is not creating a new CSS class definition, but rather
        // assigning the element to an existing CSS class named 'trash-icon'
        // The actual CSS styles for this class would be defined elsewhere in a stylesheet
        // This line simply tags the element so it can be styled according to that class definition
        // If the 'trash-icon' class doesn't exist in any stylesheet, the element will still
        // have the class name but no special styling would be applied
        trashIcon.classList.add('trash-icon');

        // Set its content
        trashIcon.innerHTML = 'üóëÔ∏è';
        
        // Add click event listener to remove the block when trash icon is clicked
        trashIcon.addEventListener('click', function(event) {
            // Prevent the event from bubbling up to parent elements
            event.stopPropagation();
            
            // Remove the block containing this trash icon
            block.remove();
        });
        
        // Insert the trash icon as the first child of the block
        block.insertBefore(trashIcon, block.firstChild);

    }
</script>

    

<!--
//     let currentLoss = 0;
//     let currentAccuracy = 0;
//     let layer1Gradients = [5,21,1,3];

    
//     // Store the original console.log function so we can still use it
//     const originalConsoleLog = console.log;
    
//     // Override console.log to capture and display output in the console-output div
//     console.log = function() {
//         // Call the original console.log
//         originalConsoleLog.apply(console, arguments);
        
//         // Format arguments to string
//         const output = Array.from(arguments).map(arg => {
//             if (typeof arg === 'object') {
//                 // JSON.stringify(value, replacer, space) converts objects to JSON strings
//                 // First parameter (arg): The object to convert to a JSON string
//                 // Second parameter (null): A replacer function or array to transform values (null = no transformation)
//                 // Third parameter (2): Number of spaces for indentation to make the output more readable
//                 return JSON.stringify(arg, null, 2);
//             }
//             return String(arg);
//         }).join(' ');
        
//         // Update the console div with the formatted output
//         const consoleDiv = document.getElementById('console-output');
//         consoleDiv.innerHTML += output + '\n';
        
//         // Auto-scroll to bottom
//         consoleDiv.scrollTop = consoleDiv.scrollHeight;
//     };
    
//     // Initialize variables for box animation
//     let position = 0;
//     const box = document.getElementById('box');
//     const maxPosition = window.innerWidth;
    
//     // Set initial box styling
//     // box.style.position = 'absolute';
//     // box.style.backgroundColor = '#3498db';
//     // box.style.color = 'white';
//     // box.style.padding = '10px';
//     // box.style.borderRadius = '5px';
//     console.group("Epoch 1");
// console.log("Loss:", currentLoss);
// console.log("Accuracy:", currentAccuracy);
// // maybe a sub-group for layer details
// console.group("Layer 1 gradients");
// console.table(layer1Gradients);
// console.groupEnd();
// console.groupEnd();
// for(let i = 0; i < 100; i++){console.log("BIG CHUNFGUS"+i+Date.now());}
//     console.log(`Available width: ${window.innerWidth}px, Box width: ${box.offsetWidth}px`);
//     console.log(`Box will move to maximum position: ${maxPosition}px`);
//     let silly=0;
//     function moveBox(timestamp) {
//       // If this is the first call, save the start time
//       if (!moveBox.startTime) {1
//         moveBox.startTime = timestamp;
//       }
      
//       // Calculate elapsed time in seconds
//       const elapsed = (timestamp - moveBox.startTime) / 1000;
      
//       // Move at 100 pixels per second
//       position = Math.min(elapsed * 100, maxPosition);
      
//       // Apply the position and grow font based on silly value
//       box.style.transform = `translateX(${position}px)`; 
//       box.innerHTML = "Your Mom"; 
//       box.style.fontSize = `${silly++}px`;
//       silly++;
//       // If not at the end, request next frame
//       if (position < maxPosition) {
//         requestAnimationFrame(moveBox);
//       }
//     }
    
//     // Start the animation
//     requestAnimationFrame(moveBox);
<script src="neuralNetMnistTF.js"></script> -->
